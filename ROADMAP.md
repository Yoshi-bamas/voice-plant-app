# Voice Plant App - Roadmap

## バージョン戦略

### v1.0: 完成された体験（現在開発中）
**リリース目標:** 2025年内
**コア機能:**
- 状態管理（Clear後の植物完成状態維持）
- Clearライン調整スライダー（0.5-1.0可変）
- Canvas/Console分離UI（SF風スタイリング）
- 継続エフェクト（花びら降下、軽量20粒子）

**技術スタック:**
- TypeScript (Strict mode)
- p5.js Canvas 2D
- Web Audio API
- SimplexNoise

---

### v1.0.5: Canvas 2D最適化
**リリース目標:** v1.0完成後即時
**目標:** 既存コードそのままで粒子数3倍増強（150→500個）

**実装内容:**
- `createGraphics()`事前レンダリング
- `image()`高速描画（`circle()`より2-3倍速）
- グローエフェクト最適化

**効果:**
- 描画速度: 2-3倍高速化
- 粒子数上限: 150 → 500個
- CPU使用率: 10-15%削減

**実装時間:** 15-30分
**互換性:** 100%（既存コード変更不要）
**リスク:** ゼロ

---

### v1.1: WebGL移行 + 3D演出
**リリース目標:** v1.0.5完成後1-2週間
**目標:** GPU並列処理で粒子10000個、3D表現追加

#### Phase 1: WEBGL基盤（互換性保証）
**実装時間:** 20分
**変更内容:**
```typescript
// main.ts（1行変更）
p.createCanvas(800, 600, p.WEBGL);

// 各View.draw()（1行追加）
p.translate(-p.width/2, -p.height/2); // 座標系保護
```

**互換性保証:**
- コード資産: 95%変更不要
- 演出素材: 100%そのまま
- 変更箇所: 10-20行（translate追加のみ）
- ロールバック: 2分で元に戻る

#### Phase 2: 粒子3D化
**実装時間:** 30分
**効果:**
- 粒子数: 500 → 10000個以上（20倍）
- CPU使用率: 50%削減（GPU並列処理）
- 3D球体表示（`sphere()`）

#### Phase 3: 3D演出追加（任意）
**実装時間:** 段階的（1-2日）
**新機能:**
- ライティング（`directionalLight`, `ambientLight`）
- 粒子回転アニメーション（`rotateZ`）
- カメラワーク（`camera()`でズーム・パン）
- シェーダーエフェクト（カスタムグロー）

#### Phase 4: 安定化
- ブラウザ互換性テスト（Chrome, Edge, Firefox, Safari）
- モバイル動作確認（Android Chrome, iOS Safari）
- WebGL非対応時フォールバック（Canvas 2D自動切替）

**完了条件:** 粒子10000個で60fps維持、全ブラウザ動作

---

### v1.2: エフェクト強化（WebGLベース）
**リリース目標:** v1.1完成後1ヶ月
**目標:** 継続粒子の視覚的品質向上

**新エフェクト:**
1. **花びら形状:**
   - SVGパス → 3Dメッシュ変換
   - 回転アニメーション（z軸回転、3D風）
   - サイズバリエーション（大中小ランダム）

2. **光の粒子:**
   - 星型パーティクル（カスタムシェイプ）
   - キラキラエフェクト（alpha値ランダム変動）
   - 周波数連動（高音で輝度増加）

3. **コンクリート質感:**
   - Simplexノイズテクスチャ（リアル）
   - ひび割れアニメーション（徐々に拡大）
   - 破片エフェクト（Box2D物理演算）

---

### v1.3: 新Viewモード
**リリース目標:** v1.2完成後2ヶ月
**目標:** 表現バリエーション追加

**新View:**
1. **SeasonalPlantView:**
   - 春: 桜（ピンク粒子）
   - 夏: 向日葵（黄色、太陽モチーフ）
   - 秋: 紅葉（赤・オレンジ）
   - 冬: 雪の結晶（青・白）

2. **3DPlantView:**
   - three.jsまたはp5.js WEBGL mode完全活用
   - 3D回転可能な植物（マウスドラッグ）
   - リアルタイムシャドウ・反射

3. **AquaticView:**
   - 水中植物（海藻、珊瑚）
   - 泡エフェクト
   - 波の揺らぎ（sin波ベース）

---

### v1.4: ソーシャル機能
**リリース目標:** v1.3完成後2ヶ月
**目標:** シェア・コミュニティ

**新機能:**
1. **スクリーンショット:**
   - `p5.saveCanvas()`
   - Clear時の自動キャプチャ
   - SNSシェアボタン（Twitter, Instagram）

2. **録画機能:**
   - MediaRecorder API
   - 10秒間の成長過程録画
   - GIF/MP4エクスポート（ffmpeg.js）

3. **ギャラリー:**
   - Firebase Storageで画像保存
   - 他ユーザーの作品閲覧
   - いいね・コメント機能（Firebase Firestore）
   - トレンド表示（人気の色・形状）

---

### v2.0: マルチプレイヤー
**リリース目標:** v1.4完成後3-6ヶ月
**目標:** 協力プレイ、競争モード

**新機能:**
1. **協力成長モード:**
   - 2人同時に声を出して成長加速
   - WebRTC音声通信
   - リアルタイム同期（WebSocket, Socket.io）

2. **競争モード:**
   - 誰が早くClearできるか
   - リーダーボード（Firebase Realtime Database）
   - タイムアタック

3. **ガーデン共有:**
   - 複数の植物を同一画面に配置
   - 友達の植物と並べて鑑賞
   - コラボレーション作品

---

## 技術的マイルストーン

### パフォーマンス進化
| バージョン | 粒子数 | 描画方式 | CPU使用率 | GPU使用率 |
|----------|--------|---------|----------|----------|
| v1.0 | 150個 | Canvas 2D | 30% | 0% |
| v1.0.5 | 500個 | Canvas 2D最適化 | 20% | 0% |
| v1.1 | 10000個 | WebGL | 10% | 40% |
| v1.2+ | 50000個+ | WebGL+シェーダー | 5% | 60% |

### 互換性保証
- **v1.0 → v1.0.5:** 100%互換（コード変更不要）
- **v1.0.5 → v1.1:** 98%互換（translate追加のみ、20分）
- **v1.1 → v1.2+:** 100%互換（エフェクト追加のみ）

### ロールバック戦略
- 各バージョンでGit tagでリリース
- 問題発生時は前バージョンに即座に戻す
- feature branchで実験、安定後mainマージ

---

## リリースサイクル

### 開発フロー
```
v1.0開発 (現在)
    ↓ 完成後即時
v1.0.5最適化 (15-30分実装)
    ↓ 1-2週間後
v1.1 WebGL移行 (段階的、3フェーズ)
    ↓ 1ヶ月後
v1.2エフェクト強化
    ↓ 2ヶ月後
v1.3新Viewモード
    ↓ 2ヶ月後
v1.4ソーシャル機能
    ↓ 3-6ヶ月後
v2.0マルチプレイヤー
```

### テスト戦略
- 各バージョン: ユニットテスト追加
- v1.1以降: E2Eテスト（Playwright）
- v1.4以降: 負荷テスト（Firebase Functions）

---

## コミュニティフィードバック

### ベータテスト
- v1.0: クローズドベータ（友人・知人）
- v1.1: オープンベータ（Twitter募集）
- v1.4: 大規模ベータ（Product Hunt掲載）

### 機能リクエスト受付
- GitHub Issues
- Discord サーバー（v1.4以降）
- Googleフォーム（定期アンケート）

---

## 長期ビジョン（v3.0+）

### VR/AR対応
- WebXR APIでVR対応
- ARで現実空間に植物配置

### 教育利用
- 音声学習アプリ（発音練習）
- プレゼンテーションツール（音量可視化）

### アート展示
- インスタレーション作品化
- 美術館・ギャラリー展示

### ビジネス展開
- エンタープライズ版（ロゴカスタマイズ）
- API提供（他アプリへの組み込み）
- NFT連携（作品のトークン化）

---

**最終目標:** 音声とビジュアルの融合による、新しいインタラクティブ体験の創造
