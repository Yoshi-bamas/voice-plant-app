# Voice Plant App v1.4 æ”¹ä¿®è¨ˆç”»æ›¸

**ç›®æ¨™:** æ¼”å‡ºå¼·åŒ–ãƒ»ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼æ”¹å–„ãƒ»UI/UXå‘ä¸Š

## ğŸ“‹ æ”¹ä¿®è¦ä»¶ã¾ã¨ã‚

### 1. ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ç”»é¢è¿½åŠ 
- **å‹•ç”»å†ç”Ÿæ©Ÿèƒ½**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ ãƒ¼ãƒ“ãƒ¼ãƒ¢ãƒ¼ãƒ‰ON/OFFï¼‰
- Startãƒœã‚¿ãƒ³ã¾ã§ã®å°ç·šæ”¹å–„
- ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ä¸–ç•Œè¦³ã®ç¢ºç«‹

### 2. Startæ¼”å‡ºå¼·åŒ–
- **ãƒ­ãƒ¼ãƒ‰æ¼”å‡º**ï¼ˆç·Šå¼µæ„Ÿãƒ»æœŸå¾…æ„Ÿï¼‰
- **æ¼”å‡ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**ï¼š"å¤§ããªå£°ã§æƒ³ã„ã‚’ä¼ãˆã‚ï¼"
- **ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡º**ï¼ˆ3, 2, 1, START!ï¼‰

### 3. æˆé•·ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„ï¼ˆé‡è¦ï¼‰
**ç¾è¡Œï¼ˆv1.3ï¼‰:**
- ç¬é–“éŸ³é‡ã§é«˜ã•æ±ºå®š
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ä¼¸ã³ç¸®ã¿

**v1.4æ–°ã‚·ã‚¹ãƒ†ãƒ :**
- **MAXåˆ°é”å¾Œã€å£°ã‚’ä¼¸ã°ã™ã¨æˆé•·**
- **æŒç¶šåŠ›ãŒé‡è¦**ï¼ˆç¬ç™ºåŠ› â†’ ç¶™ç¶šåŠ›ï¼‰
- å¾®èª¿æ•´å¯èƒ½ãªé›£æ˜“åº¦

### 4. ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼æ”¹å–„ï¼ˆé‡è¦ï¼‰
**æ–°ãƒ•ãƒ­ãƒ¼:**
```
Start
  â†“
ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ï¼ˆ3ç§’ï¼‰
  â†“
éŸ³é‡å¾…æ©Ÿï¼ˆä¸€å®šVolumeè¶…ãˆã‚‹ã¾ã§ï¼‰
  â†“
ãƒãƒ£ãƒ¬ãƒ³ã‚¸é–‹å§‹ï¼ˆæˆé•·é–‹å§‹ï¼‰
  â†“
  â”œâ”€ ç›®æ¨™é”æˆ â†’ çªç ´æ¼”å‡ºï¼ˆãã®å ´ï¼‰
  â””â”€ æœªé”æˆ
  â†“
Volumeä¸‹é™å¾…ã¡ï¼ˆä¸€å®šä»¥ä¸‹ã«ãªã‚‹ã¾ã§ï¼‰
  â†“
çµæœåˆ¤å®š
  â”œâ”€ Clear!ï¼ˆé”æˆæ¸ˆã¿ï¼‰
  â””â”€ Game Overï¼ˆæœªé”æˆï¼‰
```

### 5. çµæœæ¼”å‡ºè¿½åŠ 
- **Clearãƒ ãƒ¼ãƒ“ãƒ¼**ï¼ˆå‹åˆ©æ¼”å‡ºã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **GameOverãƒ ãƒ¼ãƒ“ãƒ¼**ï¼ˆæ•—åŒ—æ¼”å‡ºã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- ãƒ ãƒ¼ãƒ“ãƒ¼ãƒ¢ãƒ¼ãƒ‰ON/OFFåˆ‡æ›¿

### 6. ãƒ‡ã‚·ãƒ™ãƒ«è¡¨ç¤º
- **Canvaså†…æç”»**ï¼ˆVisualizerä¸­å¤®ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ•°å€¤æ›´æ–°
- è¦–èªæ€§ã®é«˜ã„ãƒ•ã‚©ãƒ³ãƒˆ

### 7. åŠ¹æœéŸ³ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯éŸ³**
- **ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³éŸ³**ï¼ˆ3, 2, 1, START!ï¼‰
- **ç›®æ¨™é”æˆéŸ³**ï¼ˆçªç ´æ™‚ï¼‰
- **çµæœç™ºè¡¨éŸ³**ï¼ˆClear/GameOverï¼‰

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆï¼ˆæ–°è¦è¿½åŠ ï¼‰

```
src/
â”œâ”€â”€ scenes/                      # ã‚·ãƒ¼ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ SceneManager.ts          # ã‚·ãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆç®¡ç†
â”‚   â”œâ”€â”€ OpeningScene.ts          # ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ç”»é¢
â”‚   â”œâ”€â”€ CountdownScene.ts        # ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡º
â”‚   â”œâ”€â”€ GameScene.ts             # ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ï¼ˆæ—¢å­˜çµ±åˆï¼‰
â”‚   â””â”€â”€ ResultScene.ts           # çµæœç™ºè¡¨
â”‚
â”œâ”€â”€ systems/                     # ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ GrowthSystem.ts          # æˆé•·ã‚·ã‚¹ãƒ†ãƒ ï¼ˆMAXå¾Œã®æŒç¶šå‹ï¼‰
â”‚   â”œâ”€â”€ GameFlowController.ts   # ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
â”‚   â””â”€â”€ VolumeThresholdDetector.ts # Volumeé–¾å€¤æ¤œå‡º
â”‚
â”œâ”€â”€ assets/                      # ã‚¢ã‚»ãƒƒãƒˆç®¡ç†ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ sounds/                  # åŠ¹æœéŸ³
â”‚   â”‚   â”œâ”€â”€ SoundManager.ts      # éŸ³å£°å†ç”Ÿç®¡ç†
â”‚   â”‚   â”œâ”€â”€ button-click.mp3
â”‚   â”‚   â”œâ”€â”€ countdown-3.mp3
â”‚   â”‚   â”œâ”€â”€ countdown-2.mp3
â”‚   â”‚   â”œâ”€â”€ countdown-1.mp3
â”‚   â”‚   â”œâ”€â”€ countdown-start.mp3
â”‚   â”‚   â”œâ”€â”€ goal-reached.mp3
â”‚   â”‚   â””â”€â”€ result.mp3
â”‚   â”‚
â”‚   â””â”€â”€ videos/                  # ãƒ ãƒ¼ãƒ“ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”‚       â”œâ”€â”€ VideoPlayer.ts       # å‹•ç”»å†ç”Ÿç®¡ç†
â”‚       â”œâ”€â”€ opening.mp4          # ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°
â”‚       â”œâ”€â”€ clear.mp4            # ã‚¯ãƒªã‚¢æ¼”å‡º
â”‚       â””â”€â”€ gameover.mp4         # ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
â”‚
â”œâ”€â”€ ui/                          # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ MessageDisplay.ts        # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
â”‚   â”œâ”€â”€ CountdownDisplay.ts      # ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¡¨ç¤º
â”‚   â”œâ”€â”€ DecibelDisplay.ts        # ãƒ‡ã‚·ãƒ™ãƒ«è¡¨ç¤ºï¼ˆCanvaså†…ï¼‰
â”‚   â””â”€â”€ SettingsPanel.ts         # è¨­å®šãƒ‘ãƒãƒ«ï¼ˆãƒ ãƒ¼ãƒ“ãƒ¼ON/OFFç­‰ï¼‰
â”‚
â””â”€â”€ types.ts                     # å‹å®šç¾©æ‹¡å¼µ
    â”œâ”€â”€ GameStateå‹è¿½åŠ           # 'opening' | 'countdown' | 'waiting' | 'playing' | 'goalReached' | 'result'
    â””â”€â”€ SceneTypeå‹è¿½åŠ           # ã‚·ãƒ¼ãƒ³è­˜åˆ¥
```

---

## ğŸ“ è©³ç´°è¨­è¨ˆ

### 1. ã‚·ãƒ¼ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

#### SceneManager.ts
```typescript
export type SceneType = 'opening' | 'countdown' | 'game' | 'result';

export interface IScene {
    enter(): void;           // ã‚·ãƒ¼ãƒ³é–‹å§‹æ™‚
    exit(): void;            // ã‚·ãƒ¼ãƒ³çµ‚äº†æ™‚
    update(): void;          // æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°
    draw(p: p5): void;       // æç”»
}

export class SceneManager {
    private currentScene: IScene;
    private scenes: Map<SceneType, IScene>;

    switchTo(sceneType: SceneType): void {
        this.currentScene.exit();
        this.currentScene = this.scenes.get(sceneType)!;
        this.currentScene.enter();
    }
}
```

#### OpeningScene.ts
```typescript
export class OpeningScene implements IScene {
    private videoPlayer?: VideoPlayer;
    private skipButton: HTMLButtonElement;

    enter(): void {
        if (settings.movieMode) {
            this.videoPlayer.play('opening');
        }
        // "å¤§ããªå£°ã§æƒ³ã„ã‚’ä¼ãˆã‚ï¼" ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        this.showMessage();
    }

    draw(p: p5): void {
        // ãƒ­ã‚´ã€ã‚¿ã‚¤ãƒˆãƒ«ã€Startãƒœã‚¿ãƒ³æç”»
    }
}
```

#### CountdownScene.ts
```typescript
export class CountdownScene implements IScene {
    private countdown: number = 3;
    private soundManager: SoundManager;

    enter(): void {
        this.startCountdown();
    }

    private startCountdown(): void {
        const interval = setInterval(() => {
            this.soundManager.play(`countdown-${this.countdown}`);
            this.countdown--;

            if (this.countdown === 0) {
                clearInterval(interval);
                this.soundManager.play('countdown-start');
                // GameSceneã¸é·ç§»
                sceneManager.switchTo('game');
            }
        }, 1000);
    }

    draw(p: p5): void {
        // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ•°å­—ã‚’å¤§ããè¡¨ç¤º
        p.textSize(120);
        p.text(this.countdown, p.width/2, p.height/2);
    }
}
```

### 2. æˆé•·ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„

#### GrowthSystem.tsï¼ˆæ–°è¦ï¼‰
```typescript
export class GrowthSystem {
    private maxVolume: number = 0;          // ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®æœ€å¤§éŸ³é‡
    private sustainedFrames: number = 0;    // MAXç¶­æŒãƒ•ãƒ¬ãƒ¼ãƒ æ•°
    private currentHeight: number = 0;
    private growthRate: number = 2.0;       // æˆé•·é€Ÿåº¦ï¼ˆèª¿æ•´å¯èƒ½ï¼‰

    update(volume: number): void {
        // MAXæ›´æ–°
        if (volume > this.maxVolume) {
            this.maxVolume = volume;
        }

        // MAXåˆ°é”åˆ¤å®šï¼ˆ95%ä»¥ä¸Šã‚’MAXã¨ã¿ãªã™ï¼‰
        const isAtMax = volume >= this.maxVolume * 0.95;

        if (isAtMax) {
            // MAXç¶­æŒä¸­ â†’ æˆé•·
            this.sustainedFrames++;
            this.currentHeight += this.growthRate;
            this.currentHeight = Math.min(this.currentHeight, 400); // ä¸Šé™
        } else {
            // MAXæœªé” â†’ æˆé•·åœæ­¢ï¼ˆæ¸›è¡°ãªã—ï¼‰
            this.sustainedFrames = 0;
        }
    }

    reset(): void {
        this.maxVolume = 0;
        this.sustainedFrames = 0;
        this.currentHeight = 0;
    }

    getCurrentHeight(): number {
        return this.currentHeight;
    }

    getSustainedTime(): number {
        return this.sustainedFrames / 60; // ç§’å˜ä½
    }
}
```

### 3. ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼æ”¹å–„

#### GameFlowController.tsï¼ˆæ–°è¦ï¼‰
```typescript
export type GameState =
    | 'opening'        // ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°
    | 'countdown'      // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
    | 'waiting'        // éŸ³é‡å¾…æ©Ÿï¼ˆé–¾å€¤è¶…ãˆã‚‹ã¾ã§ï¼‰
    | 'playing'        // ãƒ—ãƒ¬ã‚¤ä¸­
    | 'goalReached'    // ç›®æ¨™é”æˆï¼ˆç¶™ç¶šä¸­ï¼‰
    | 'result';        // çµæœç™ºè¡¨

export class GameFlowController {
    private state: GameState = 'opening';
    private volumeThreshold: number = 0.3;  // é–‹å§‹é–¾å€¤
    private endThreshold: number = 0.1;     // çµ‚äº†é–¾å€¤
    private goalReached: boolean = false;

    update(volume: number, currentHeight: number, goalHeight: number): void {
        switch (this.state) {
            case 'waiting':
                // éŸ³é‡ãŒé–¾å€¤ã‚’è¶…ãˆãŸã‚‰ãƒ—ãƒ¬ã‚¤é–‹å§‹
                if (volume > this.volumeThreshold) {
                    this.transitionTo('playing');
                    this.onPlayStart();
                }
                break;

            case 'playing':
                // ç›®æ¨™é”æˆãƒã‚§ãƒƒã‚¯
                if (!this.goalReached && currentHeight >= goalHeight) {
                    this.goalReached = true;
                    this.onGoalReached();  // çªç ´æ¼”å‡º
                    // çŠ¶æ…‹ã¯'playing'ã®ã¾ã¾ï¼ˆéŸ³é‡ä¸‹é™å¾…ã¡ï¼‰
                }

                // éŸ³é‡ä¸‹é™ãƒã‚§ãƒƒã‚¯
                if (volume < this.endThreshold) {
                    this.transitionTo('result');
                    this.onResult(this.goalReached);
                }
                break;
        }
    }

    private onGoalReached(): void {
        soundManager.play('goal-reached');
        messageDisplay.show('çªç ´ï¼ï¼');
        // ç²’å­ãƒãƒ¼ã‚¹ãƒˆç­‰ã®æ¼”å‡º
    }

    private onResult(cleared: boolean): void {
        soundManager.play('result');
        sceneManager.switchTo('result');
        // ResultSceneã«ã‚¯ãƒªã‚¢çŠ¶æ…‹ã‚’æ¸¡ã™
    }

    transitionTo(newState: GameState): void {
        console.log(`GameState: ${this.state} -> ${newState}`);
        this.state = newState;
    }

    getState(): GameState {
        return this.state;
    }

    reset(): void {
        this.state = 'waiting';
        this.goalReached = false;
    }
}
```

### 4. ãƒ‡ã‚·ãƒ™ãƒ«è¡¨ç¤º

#### DecibelDisplay.tsï¼ˆæ–°è¦ï¼‰
```typescript
export class DecibelDisplay {
    private volume: number = 0;

    update(volume: number): void {
        this.volume = volume;
    }

    draw(p: p5): void {
        // Canvasä¸­å¤®ï¼ˆVisualizerã®ä¸­ï¼‰ã«æç”»
        p.push();
        p.textAlign(p.CENTER, p.CENTER);
        p.textSize(48);
        p.fill(0, 255, 0, 200);  // åŠé€æ˜ã®ç·‘
        p.stroke(0, 0, 0, 150);
        p.strokeWeight(3);

        // ãƒ‡ã‚·ãƒ™ãƒ«æ›ç®—ï¼ˆä»®: 0-1 â†’ 0-100dBï¼‰
        const db = Math.round(this.volume * 100);
        p.text(`${db} dB`, p.width / 2, p.height / 2);

        p.pop();
    }
}
```

### 5. åŠ¹æœéŸ³ã‚·ã‚¹ãƒ†ãƒ 

#### SoundManager.tsï¼ˆæ–°è¦ï¼‰
```typescript
export type SoundType =
    | 'button-click'
    | 'countdown-3'
    | 'countdown-2'
    | 'countdown-1'
    | 'countdown-start'
    | 'goal-reached'
    | 'result';

export class SoundManager {
    private sounds: Map<SoundType, HTMLAudioElement> = new Map();
    private enabled: boolean = true;

    constructor() {
        this.loadSounds();
    }

    private loadSounds(): void {
        const soundFiles: Record<SoundType, string> = {
            'button-click': 'assets/sounds/button-click.mp3',
            'countdown-3': 'assets/sounds/countdown-3.mp3',
            'countdown-2': 'assets/sounds/countdown-2.mp3',
            'countdown-1': 'assets/sounds/countdown-1.mp3',
            'countdown-start': 'assets/sounds/countdown-start.mp3',
            'goal-reached': 'assets/sounds/goal-reached.mp3',
            'result': 'assets/sounds/result.mp3'
        };

        Object.entries(soundFiles).forEach(([key, path]) => {
            const audio = new Audio(path);
            audio.preload = 'auto';
            this.sounds.set(key as SoundType, audio);
        });
    }

    play(type: SoundType): void {
        if (!this.enabled) return;

        const sound = this.sounds.get(type);
        if (sound) {
            sound.currentTime = 0;  // é ­å‡ºã—
            sound.play().catch(err => console.warn('Sound play failed:', err));
        }
    }

    setEnabled(enabled: boolean): void {
        this.enabled = enabled;
    }
}
```

### 6. ãƒ ãƒ¼ãƒ“ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 

#### VideoPlayer.tsï¼ˆæ–°è¦ï¼‰
```typescript
export type VideoType = 'opening' | 'clear' | 'gameover';

export class VideoPlayer {
    private videos: Map<VideoType, HTMLVideoElement> = new Map();
    private currentVideo?: HTMLVideoElement;
    private onComplete?: () => void;

    constructor() {
        this.loadVideos();
    }

    private loadVideos(): void {
        const videoFiles: Record<VideoType, string> = {
            'opening': 'assets/videos/opening.mp4',
            'clear': 'assets/videos/clear.mp4',
            'gameover': 'assets/videos/gameover.mp4'
        };

        Object.entries(videoFiles).forEach(([key, path]) => {
            const video = document.createElement('video');
            video.src = path;
            video.preload = 'auto';
            video.style.display = 'none';
            document.body.appendChild(video);
            this.videos.set(key as VideoType, video);
        });
    }

    play(type: VideoType, onComplete?: () => void): void {
        this.currentVideo = this.videos.get(type);
        this.onComplete = onComplete;

        if (this.currentVideo) {
            this.currentVideo.style.display = 'block';
            this.currentVideo.style.position = 'absolute';
            this.currentVideo.style.top = '0';
            this.currentVideo.style.left = '0';
            this.currentVideo.style.width = '100%';
            this.currentVideo.style.height = '100%';
            this.currentVideo.style.zIndex = '1000';

            this.currentVideo.onended = () => {
                this.stop();
                if (this.onComplete) this.onComplete();
            };

            this.currentVideo.play();
        }
    }

    stop(): void {
        if (this.currentVideo) {
            this.currentVideo.pause();
            this.currentVideo.currentTime = 0;
            this.currentVideo.style.display = 'none';
        }
    }
}
```

---

## ğŸ“Š å®Ÿè£…å„ªå…ˆåº¦

### Phase A: ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼æ”¹å–„ï¼ˆæœ€å„ªå…ˆï¼‰
**æœŸé–“:** 2-3æ—¥
**ç†ç”±:** ã‚²ãƒ¼ãƒ ä½“é¨“ã®æ ¹å¹¹ã€ä»–ã®æ¼”å‡ºã‚ˆã‚Šé‡è¦

- [ ] A-1. GameFlowControllerå®Ÿè£…
- [ ] A-2. GrowthSystemå®Ÿè£…ï¼ˆMAXå¾Œã®æŒç¶šå‹ï¼‰
- [ ] A-3. VolumeThresholdDetectorå®Ÿè£…
- [ ] A-4. PlantView/FractalPlantViewã«çµ±åˆ
- [ ] A-5. ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´

### Phase B: ã‚·ãƒ¼ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆä¸­å„ªå…ˆï¼‰
**æœŸé–“:** 2-3æ—¥
**ç†ç”±:** æ¼”å‡ºã®åŸºç›¤ã€åŠ¹æœéŸ³ãƒ»ãƒ ãƒ¼ãƒ“ãƒ¼ã®å‰æ

- [ ] B-1. SceneManagerå®Ÿè£…
- [ ] B-2. OpeningSceneå®Ÿè£…ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼‰
- [ ] B-3. CountdownSceneå®Ÿè£…ï¼ˆ3,2,1,START!ï¼‰
- [ ] B-4. ResultSceneå®Ÿè£…
- [ ] B-5. main.tsã«çµ±åˆ

### Phase C: åŠ¹æœéŸ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆä¸­å„ªå…ˆï¼‰
**æœŸé–“:** 1-2æ—¥
**ç†ç”±:** æ¯”è¼ƒçš„ç°¡å˜ã€ä½“é¨“å‘ä¸ŠåŠ¹æœå¤§

- [ ] C-1. SoundManagerå®Ÿè£…
- [ ] C-2. åŠ¹æœéŸ³ã‚¢ã‚»ãƒƒãƒˆæº–å‚™ï¼ˆä»®éŸ³ã§OKï¼‰
- [ ] C-3. å„ã‚·ãƒ¼ãƒ³ã«çµ±åˆ
- [ ] C-4. ON/OFFè¨­å®šUIè¿½åŠ 

### Phase D: ãƒ‡ã‚·ãƒ™ãƒ«è¡¨ç¤ºï¼ˆä½å„ªå…ˆï¼‰
**æœŸé–“:** 0.5æ—¥
**ç†ç”±:** å˜ç´”ã€ä¾å­˜ãªã—

- [ ] D-1. DecibelDisplayå®Ÿè£…
- [ ] D-2. Visualizerçµ±åˆ
- [ ] D-3. ãƒ•ã‚©ãƒ³ãƒˆãƒ»è‰²èª¿æ•´

### Phase E: ãƒ ãƒ¼ãƒ“ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
**æœŸé–“:** 1-2æ—¥
**ç†ç”±:** ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã€ãƒªã‚½ãƒ¼ã‚¹æ¬¡ç¬¬

- [ ] E-1. VideoPlayerå®Ÿè£…
- [ ] E-2. å‹•ç”»ã‚¢ã‚»ãƒƒãƒˆæº–å‚™ï¼ˆâ€»è¦ç›¸è«‡ï¼‰
- [ ] E-3. å„ã‚·ãƒ¼ãƒ³ã«çµ±åˆ
- [ ] E-4. ON/OFFè¨­å®šUIè¿½åŠ 

---

## ğŸ¨ ã‚¢ã‚»ãƒƒãƒˆè¦ä»¶

### åŠ¹æœéŸ³ï¼ˆ7ç¨®é¡ï¼‰
| ãƒ•ã‚¡ã‚¤ãƒ«å | ç”¨é€” | é•·ã• | éŸ³è³ªè¦ä»¶ |
|-----------|------|------|---------|
| button-click.mp3 | ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | 0.1ç§’ | è»½å¿«ã€çŸ­ã„ |
| countdown-3.mp3 | ã‚«ã‚¦ãƒ³ãƒˆ3 | 0.5ç§’ | ä½éŸ³ã€ç·Šå¼µæ„Ÿ |
| countdown-2.mp3 | ã‚«ã‚¦ãƒ³ãƒˆ2 | 0.5ç§’ | ä¸­éŸ³ã€ç·Šå¼µæ„Ÿâ†‘ |
| countdown-1.mp3 | ã‚«ã‚¦ãƒ³ãƒˆ1 | 0.5ç§’ | é«˜éŸ³ã€ç·Šå¼µæ„Ÿâ†‘â†‘ |
| countdown-start.mp3 | START! | 1.0ç§’ | çˆ†ç™ºçš„ã€é‹­ã„ |
| goal-reached.mp3 | ç›®æ¨™é”æˆ | 1.5ç§’ | è¯ã‚„ã‹ã€å‹åˆ©æ„Ÿ |
| result.mp3 | çµæœç™ºè¡¨ | 2.0ç§’ | ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ |

**ä»®éŸ³æº:** Web Audio APIã§ç”Ÿæˆå¯èƒ½ï¼ˆã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰

### ãƒ ãƒ¼ãƒ“ãƒ¼ï¼ˆ3ç¨®é¡ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
| ãƒ•ã‚¡ã‚¤ãƒ«å | ç”¨é€” | é•·ã• | è§£åƒåº¦ |
|-----------|------|------|--------|
| opening.mp4 | ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚° | 5-10ç§’ | 800x600 |
| clear.mp4 | ã‚¯ãƒªã‚¢æ¼”å‡º | 3-5ç§’ | 800x600 |
| gameover.mp4 | ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ | 3-5ç§’ | 800x600 |

**ä»£æ›¿æ¡ˆ:** ãƒ ãƒ¼ãƒ“ãƒ¼ãªã—ã§ã‚‚å‹•ä½œï¼ˆCSS/Canvasæ¼”å‡ºã§ä»£ç”¨å¯ï¼‰

---

## ğŸ”§ è¨­å®šUIæ‹¡å¼µ

### SettingsPanel.tsï¼ˆæ–°è¦ï¼‰
```typescript
export interface GameSettings {
    movieMode: boolean;      // ãƒ ãƒ¼ãƒ“ãƒ¼å†ç”ŸON/OFF
    soundEnabled: boolean;   // åŠ¹æœéŸ³ON/OFF
    growthRate: number;      // æˆé•·é€Ÿåº¦ï¼ˆ0.5-2.0ï¼‰
    volumeThreshold: number; // é–‹å§‹é–¾å€¤ï¼ˆ0.2-0.5ï¼‰
}

export class SettingsPanel {
    private settings: GameSettings = {
        movieMode: false,
        soundEnabled: true,
        growthRate: 1.0,
        volumeThreshold: 0.3
    };

    // è¨­å®šä¿å­˜ï¼ˆlocalStorageï¼‰
    save(): void {
        localStorage.setItem('voicePlantSettings', JSON.stringify(this.settings));
    }

    // è¨­å®šèª­ã¿è¾¼ã¿
    load(): void {
        const saved = localStorage.getItem('voicePlantSettings');
        if (saved) {
            this.settings = JSON.parse(saved);
        }
    }
}
```

---

## ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†

### æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
1. **ASSETS.md** - ã‚¢ã‚»ãƒƒãƒˆç®¡ç†ï¼ˆåŠ¹æœéŸ³ãƒ»å‹•ç”»ã®ãƒ‘ã‚¹ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼‰
2. **SCENES.md** - ã‚·ãƒ¼ãƒ³ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜
3. **GAMEFLOW.md** - ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼è©³ç´°è¨­è¨ˆ

### æ›´æ–°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
1. **ARCHITECTURE.md** - v1.4ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
2. **README.md** - v1.4æ–°æ©Ÿèƒ½è¿½è¨˜
3. **toDo.md** - Phase A-Eè¿½åŠ 

---

## âš ï¸ æ³¨æ„äº‹é …ãƒ»åˆ¶ç´„

### ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§
- **å‹•ç”»å†ç”Ÿ:** Safari/iOSåˆ¶ç´„ã‚ã‚Šï¼ˆè‡ªå‹•å†ç”Ÿä¸å¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¿…è¦ï¼‰
- **åŠ¹æœéŸ³:** Web Audio APIå¿…é ˆï¼ˆChrome/Edgeæ¨å¥¨ï¼‰
- **localStorage:** ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ç„¡åŠ¹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **å‹•ç”»å†ç”Ÿä¸­:** Canvasæç”»ã‚’ä¸€æ™‚åœæ­¢ï¼ˆGPUç«¶åˆå›é¿ï¼‰
- **åŠ¹æœéŸ³:** preloadå¿…é ˆï¼ˆåˆå›é…å»¶å›é¿ï¼‰

### ãƒªã‚½ãƒ¼ã‚¹
- **å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º:** å„5MBä»¥ä¸‹æ¨å¥¨ï¼ˆèª­ã¿è¾¼ã¿æ™‚é–“ï¼‰
- **åŠ¹æœéŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º:** å„100KBä»¥ä¸‹æ¨å¥¨

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **Phase Aå®Ÿè£…é–‹å§‹**ï¼ˆã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼æ”¹å–„ï¼‰
2. **ä»®åŠ¹æœéŸ³ç”Ÿæˆ**ï¼ˆWeb Audio APIã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰
3. **ãƒ†ã‚¹ãƒˆãƒ—ãƒ¬ã‚¤ãƒ»èª¿æ•´**
4. **Phase Bä»¥é™ã‚’é †æ¬¡å®Ÿè£…**

ã“ã‚Œã§æ”¹ä¿®è¨ˆç”»æ›¸ã¯å®Œæˆã§ã™ã€‚æ¬¡ã«ASSETS.mdã‚’ä½œæˆã—ã¾ã™ã‹ï¼Ÿ
